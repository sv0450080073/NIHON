import"./esm-chunk-eaca7b99.js";import{B as e,t,x as a,D as s}from"./esm-chunk-64a12c37.js";import{D as o,R as n}from"./esm-chunk-0778bac7.js";function r(e,t){e&&(e.dataset.previousValue=t)}function i(r,i){r=e(r);var l=t(r,"dxbs-spin-edit");if(!r)return;o(r);let d=(u=i.decimalSeparator,c=i.needExponentialView,f=r,function(e){let t=f.dataset.selectionStartBeforePaste?f.value.trim():f.value,a=/^-?(\d)*$/;u&&(t=t.replace(/[.|,]/g,u),a=c?/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?([eE]?[+-]?(\d)*)?$/:/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?$/);let s=f.selectionStart,o=f.selectionEnd;a.test(t)?(f.value=t,f.dataset.previousValue=t):(f.dataset.selectionStartBeforePaste?(s=f.dataset.selectionStartBeforePaste,o=f.dataset.selectionEndBeforePaste):(s--,o+=f.dataset.previousValue.length-t.length),f.value=f.dataset.previousValue),f.dataset.selectionStartBeforePaste&&(f.removeAttribute("data-selection-start-before-paste"),f.removeAttribute("data-selection-end-before-paste")),f.selectionStart=s,f.selectionEnd=o});var u,c,f;let p=function(e){return function(t){e.dataset.selectionStartBeforePaste=e.selectionStart,e.dataset.selectionEndBeforePaste=e.selectionEnd}}(r);return a(r,"input",d),a(r,"paste",p),n(l,(function(){s(r,"input",d),s(r,"paste",p)})),Promise.resolve("ok")}function l(e,t){for(var a=document.activeElement;null!==a&&a!==e;)a=a.parentElement;null===a&&t.invokeMethodAsync("FocusLost")}function d(t){if(t=e(t))return o(t),Promise.resolve("ok")}const u={Init:i,Dispose:d,SetPreviousValue:r,CheckFocusedState:l};export default u;export{l as CheckFocusedState,d as Dispose,i as Init,r as SetPreviousValue};
