import"./esm-chunk-eaca7b99.js";import{B as e,x as t,a9 as o,D as n}from"./esm-chunk-64a12c37.js";import{D as s,R as r}from"./esm-chunk-0778bac7.js";import{T as a}from"./esm-chunk-c94f8125.js";import{K as u}from"./esm-chunk-6d4715b2.js";import"./esm-chunk-95f069f9.js";import{ScrollToSelectedItem as i,HasParametersForVirtualScrollingRequest as c,GetParametersForVirtualScrollingRequest as d}from"./esm-grid-c0bbd2da.js";import"./esm-popup-utils-a5d257f0.js";import"./esm-focus-utils-cbe17b19.js";import{GetDropDownElement as m,OnOutsideClick as f,AdjustDropDownPosition as l,IsDropDownVisible as p}from"./esm-dropdowns-c5f10d22.js";import{K as k,a as y}from"./esm-chunk-511b3c8e.js";function v(e){var t=m(e);i(t)}function w(t){t=e(t),document.activeElement===t&&b(t)}function C(e,t){e.dataset.timerId&&(clearTimeout(e.dataset.timerId),delete e.dataset.timerId),t||window.setTimeout((function(){C(e,!0)}),100)}function b(e){e&&e.dataset.focusedClass&&(e.className=e.dataset.focusedClass)}function h(e,t){return t&&k(e),function(e){return g(e)||e.keyCode==u.Enter}(e)&&(e.stopPropagation(),e.preventDefault()),!1}function T(e,t,o,n){var s=!1;if(n&&(s=s||y(e)),s=s||function(e){var t=e.altKey&&(e.keyCode==u.Down||e.keyCode==u.Up),o=g(e),n=e.keyCode==u.Esc||e.keyCode==u.Enter;return t||o||n}(e)){var r=e.target.value;if(o&&c(o)){var a=d(o,!1);t.invokeMethodAsync("OnComboBoxListBoxKeyUp",r,e.keyCode,e.altKey,e.ctrlKey,a.itemHeight,a.scrollTopForRequest,a.scrollHeightForRequest)}else t.invokeMethodAsync("OnComboBoxKeyUp",r,e.keyCode,e.altKey,e.ctrlKey)}}function g(e){return e.keyCode===u.Down||e.keyCode===u.Up||e.keyCode===u.PageUp||e.keyCode===u.PageDown||e.ctrlKey&&(e.keyCode===u.Home||e.keyCode===u.End)}function j(e,t,o){if(t){var n=(new Date).getTime();t.dataset.lastLostFocusTime&&n-t.dataset.lastLostFocusTime<300&&!o||(t.dataset.lastLostFocusTime=(new Date).getTime(),e.invokeMethodAsync("OnComboBoxLostFocus",t.value))}}function D(u,i,c,d){if(u=e(u)){s(u),i=e(i);var k=m(u),y=function(e){return h(e,d)},v=function(e){return T(e,c,k,d)},w=function(e){return function(e,t){b(e.target)}(e)},g=function(e){return function(e,t){var o=e.target;C(o,!0),o.dataset.timerId=window.setTimeout((function(){if(delete o.dataset.timerId,function(e){e&&e.dataset.bluredClass&&(e.className=e.dataset.bluredClass)}(o),document.activeElement!==o)try{j(t,o)}catch(e){}}),200)}(e,c)},D=function(e){return C(i)},I=function(e){return f(e,u,(function(){o(u)||s(u);var e=document.activeElement===i,t=i.dataset.timerId>0,n=k&&p(k);C(i),(e||t||n)&&j(c,i,!0)}))},K=function(e){l(u)};return t(i,"keydown",y),t(i,"keyup",v),t(i,"focus",w),t(i,"blur",g),t(u,"mousedown",D),t(document,a.touchMouseDownEventName,I),t(window,"resize",K),r(u,(function(){n(i,"keydown",y),n(i,"keyup",v),n(i,"focus",w),n(i,"blur",g),n(u,"mousedown",D),n(document,a.touchMouseDownEventName,I),n(window,"resize",K)})),Promise.resolve("ok")}}function I(t){if(t=e(t))return s(t),Promise.resolve("ok")}const K={Init:D,Dispose:I,PrepareInputIfFocused:w,ScrollToSelectedItem:v};export default K;export{I as Dispose,D as Init,w as PrepareInputIfFocused,v as ScrollToSelectedItem};
