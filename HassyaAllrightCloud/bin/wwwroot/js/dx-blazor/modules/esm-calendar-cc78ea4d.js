import"./esm-chunk-f9104efc.js";import{EnsureElement as t,GetParentByClassName as e,PreventEventAndBubble as n}from"./esm-dom-utils-d4fe413b.js";import{L as o,h as i,u as a}from"./esm-chunk-2f760454.js";import{T as c}from"./esm-chunk-38c61c5f.js";function r(e,r){if(e=t(e))return e.dayCells=void 0,function(t){o.attachEventToElement(t,"touchstart",v),o.attachEventToElement(t,"touchmove",E),o.attachEventToElement(t,"touchend",S),o.attachLongTabEventToElement(t,m),o.attachEventToElement(t,"mousedown",f),o.attachEventToElement(t,"mousemove",d),o.attachEventToElement(t,"mouseup",h)}(e),Promise.resolve("ok");function u(t,n){for(var o,i=(e.dayCells||(e.dayCells=e.querySelectorAll(".dxbs-day")),e.dayCells),a=0;o=i[a];a++){var c=o.getBoundingClientRect();if(c.top<=n&&n<c.bottom&&c.left<=t&&t<c.right)return o}}function f(t){if(!i("TouchStart")){var n=s(t.srcElement);n&&(e.inSelectionMode=!0,e.firstDate=l(n))}}function d(t){e.inSelectionMode&&(e.throttledDrag||(e.throttledDrag=c.Throttle(function(t){var n=u(t.clientX,t.clientY);if(n){var o=l(n);if(!o||!e.firstDate)return;e.lastDate?r.invokeMethodAsync("ChangeSelectionRange",o):(r.invokeMethodAsync("StartSelectionRange",e.firstDate,!t.ctrlKey),e.lastDate=o)}},20)),e.throttledDrag(t))}function h(t){e.inSelectionMode&&e.lastDate&&r.invokeMethodAsync("EndSelectionRange",!1),e.firstDate=void 0,e.lastDate=void 0,e.inSelectionMode=!1}function v(t){a(function(){},"TouchStart",300,!0)}function m(t){var n=s(t.srcElement);if(n){e.inSelectionMode=!0;var o=l(n);e.lastDate=o,r.invokeMethodAsync("StartSelectionRange",o,!1)}}function E(t){if(e.inSelectionMode){var o=u(t.touches[0].clientX,t.touches[0].clientY);if(o){var i=l(o);i&&e.lastDate-i!=0&&r.invokeMethodAsync("ChangeSelectionRange",i)}n(t)}}function S(t){e.inSelectionMode&&(r.invokeMethodAsync("EndSelectionRange",!0),n(t)),e.inSelectionMode=!1}}function l(t){return new Date(parseInt(t.getAttribute("data-date")))}function s(t){return e(t,"dxbs-day")}function u(e){if(e=t(e))return DisposeEvents(e),Promise.resolve("ok")}const f={Init:r,Dispose:u};export default f;export{u as Dispose,r as Init};
