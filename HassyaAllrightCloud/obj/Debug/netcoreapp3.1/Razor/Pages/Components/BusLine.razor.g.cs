#pragma checksum "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "9ed21541249d58527839cd361f8986a9d2794468"
// <auto-generated/>
#pragma warning disable 1591
namespace HassyaAllrightCloud.Pages.Components
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Infrastructure.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Domain.Entities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Domain.Dto;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Commons.Helpers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Commons.Constants;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Commons.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using BlazorContextMenu;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Application.Validation;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Validation;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using DevExpress.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Newtonsoft.Json.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 25 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Microsoft.Extensions.Localization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.IService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using LexLibrary.Line.NotifyBot.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 29 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using LexLibrary.Line.NotifyBot;

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using DevExpress.Blazor.Reporting;

#line default
#line hidden
#nullable disable
#nullable restore
#line 31 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Pages.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 32 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using SharedLibraries.UI.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 33 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Blazored.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Blazored.Modal.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 35 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using SharedLibraries.UI.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 37 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 38 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using Radzen.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 39 "E:\Project\HassyaAllrightCloud\_Imports.razor"
using HassyaAllrightCloud.Pages.Components.CommonComponents;

#line default
#line hidden
#nullable disable
    public partial class BusLine : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
#nullable restore
#line 3 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
 if (LineStatus == 2)
{
    classLine = "over-vehicles";
}
else
{
    classLine = "";
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(0, "\r\n");
#nullable restore
#line 12 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
 if (LineType == 3)
{
    bg = "linear-gradient(90deg, " + allow + " " + allowPercent + "%, " + notallow + " " + allowPercent + "%)";
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(1, "\r\n\r\n");
#nullable restore
#line 18 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
 if (Container.Mode == (int)BusLineMode.View || Container.Mode == (int)BusLineMode.Zoom)
{
    if (LineStatus == 1)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(2, "        ");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "listTimeline__item" + " " + (
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                        classLine

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                    LineType == 1 ? "listTimeline__item--rentalBus" : null

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                              LineType == 2 ? "listTimeline__item--spareBus" : null

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(5, "style", "height:" + (
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                      height

#line default
#line hidden
#nullable disable
            ) + "rem;" + " background:" + " " + (
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                               bg

#line default
#line hidden
#nullable disable
            ) + ";");
            __builder.AddAttribute(6, "ondragover", "event.preventDefault();");
            __builder.AddAttribute(7, "ondrop", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.DragEventArgs>(this, 
#nullable restore
#line 22 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                                                                                  HandleDrop

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(8, "\r\n");
#nullable restore
#line 23 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
             foreach (var job in Jobs)
            {
                if (job.IsBusRepair)
                {
                    MenuId = "myMenuBusRepair";
                }
                else
                {
                    MenuId = "myMenuCutline";
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(9, "                ");
            __builder.OpenComponent<BlazorContextMenu.ContextMenuTrigger>(10);
            __builder.AddAttribute(11, "MouseButtonTrigger", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<BlazorContextMenu.MouseButtonTrigger>(
#nullable restore
#line 33 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                        MouseButtonTrigger.Left

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(12, "Data", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 33 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                       job

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(13, "MenuId", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 33 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                     MenuId

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(15, "\r\n                    ");
                __builder2.OpenComponent<HassyaAllrightCloud.Pages.Components.EditItem>(16);
                __builder2.AddAttribute(17, "BusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ItemBus>>(
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                         BusLines

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(18, "ValueCheckHaitaBusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<HassyaAllrightCloud.Domain.Dto.DataInit>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<HassyaAllrightCloud.Domain.Dto.DataInit>(this, 
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                             ValueCheckHaitaBusLines

#line default
#line hidden
#nullable disable
                )));
                __builder2.AddAttribute(19, "UpYmdTimes", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ResponseHaiTaCheck>>(
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                   UpYmdTimeTmps

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(20, "Item", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ItemBus>(
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                        job

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(21, "Width", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                     Width

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(22, "Param", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ConfigBusSchedule>(
#nullable restore
#line 34 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                    Param

#line default
#line hidden
#nullable disable
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(23, "\r\n                ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(24, "\r\n");
#nullable restore
#line 36 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(25, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(26, "\r\n");
#nullable restore
#line 38 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(27, "        ");
            __builder.OpenElement(28, "div");
            __builder.AddAttribute(29, "class", "listTimeline__item" + " " + (
#nullable restore
#line 41 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                        classLine

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 41 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                    LineType == 1 ? "listTimeline__item--rentalBus" : null

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 41 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                              LineType == 2 ? "listTimeline__item--spareBus" : null

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(30, "style", "height:" + (
#nullable restore
#line 41 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                      height

#line default
#line hidden
#nullable disable
            ) + "rem;" + " background:" + " " + (
#nullable restore
#line 41 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                               bg

#line default
#line hidden
#nullable disable
            ) + ";");
            __builder.AddAttribute(31, "ondragover", "event.preventDefault();");
            __builder.AddAttribute(32, "ondrop", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.DragEventArgs>(this, 
#nullable restore
#line 41 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                                                                                  HandleDrop

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(33, "\r\n");
#nullable restore
#line 42 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
             foreach (var job in Jobs)
            {
                if (job.IsBusRepair)
                {
                    MenuId = "myMenuBusRepair";
                }
                else
                {
                    MenuId = "myMenuCutline";
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(34, "                ");
            __builder.OpenComponent<BlazorContextMenu.ContextMenuTrigger>(35);
            __builder.AddAttribute(36, "MouseButtonTrigger", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<BlazorContextMenu.MouseButtonTrigger>(
#nullable restore
#line 52 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                        MouseButtonTrigger.Left

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(37, "Data", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 52 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                       job

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(38, "MenuId", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 52 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                     MenuId

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(39, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(40, "\r\n                    ");
                __builder2.OpenComponent<HassyaAllrightCloud.Pages.Components.EditItem>(41);
                __builder2.AddAttribute(42, "BusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ItemBus>>(
#nullable restore
#line 53 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                         BusLines

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(43, "ValueCheckHaitaBusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<HassyaAllrightCloud.Domain.Dto.DataInit>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<HassyaAllrightCloud.Domain.Dto.DataInit>(this, 
#nullable restore
#line 53 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                             ValueCheckHaitaBusLines

#line default
#line hidden
#nullable disable
                )));
                __builder2.AddAttribute(44, "UpYmdTimes", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ResponseHaiTaCheck>>(
#nullable restore
#line 53 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                   UpYmdTimeTmps

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(45, "Item", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ItemBus>(
#nullable restore
#line 53 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                        job

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(46, "Width", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 53 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                     Width

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(47, "Param", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ConfigBusSchedule>(
#nullable restore
#line 53 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                    Param

#line default
#line hidden
#nullable disable
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(48, "\r\n                ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(49, "\r\n");
#nullable restore
#line 55 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"

            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(50, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(51, "\r\n");
#nullable restore
#line 58 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
    }
}
else if (Container.Mode == (int)BusLineMode.Edit)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(52, "    ");
            __builder.OpenElement(53, "div");
            __builder.AddAttribute(54, "id", 
#nullable restore
#line 62 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
              LineId

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(55, "class", "listTimeline__item" + " " + (
#nullable restore
#line 62 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                 classLine

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 62 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                             LineType == 1 ? "listTimeline__item--rentalBus" : null

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 62 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                       LineType == 2 ? "listTimeline__item--spareBus" : null

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(56, "style", "height:" + (
#nullable restore
#line 62 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                               height

#line default
#line hidden
#nullable disable
            ) + "rem;" + " background:" + " " + (
#nullable restore
#line 62 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                                        bg

#line default
#line hidden
#nullable disable
            ) + ";");
            __builder.AddMarkupContent(57, "\r\n");
#nullable restore
#line 63 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
         foreach (var job in Jobs)
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(58, "            ");
            __builder.OpenComponent<HassyaAllrightCloud.Pages.Components.EditItem>(59);
            __builder.AddAttribute(60, "BusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ItemBus>>(
#nullable restore
#line 65 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                      BusLines

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(61, "ValueCheckHaitaBusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<HassyaAllrightCloud.Domain.Dto.DataInit>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<HassyaAllrightCloud.Domain.Dto.DataInit>(this, 
#nullable restore
#line 65 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                          ValueCheckHaitaBusLines

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(62, "UpYmdTimes", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ResponseHaiTaCheck>>(
#nullable restore
#line 65 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                UpYmdTimeTmps

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(63, "Item", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ItemBus>(
#nullable restore
#line 65 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                     job

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(64, "Width", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 65 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                  Width

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(65, "Param", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ConfigBusSchedule>(
#nullable restore
#line 65 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                 Param

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(66, "\r\n");
#nullable restore
#line 66 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(67, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(68, "\r\n");
#nullable restore
#line 68 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
}
else if (Container.Mode == (int)BusLineMode.Create || Container.Mode == (int)BusLineMode.Repair)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(69, " ");
            __builder.OpenElement(70, "div");
            __builder.AddAttribute(71, "id", 
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
            LineId

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(72, "class", "listTimeline__item" + " " + (
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                 classLine

#line default
#line hidden
#nullable disable
            ) + " new" + " " + (
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                 LineType == 1 ? "listTimeline__item--rentalBus" : null

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                           LineType == 2 ? "listTimeline__item--spareBus" : null

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(73, "style", "height:" + (
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                                   height

#line default
#line hidden
#nullable disable
            ) + "rem;" + " background:" + " " + (
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                                                            bg

#line default
#line hidden
#nullable disable
            ) + ";");
            __builder.AddAttribute(74, "onmousedown", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                                                                                               e => HandleMouseDown(e, LineId, buslineRef)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddElementReferenceCapture(75, (__value) => {
#nullable restore
#line 70 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                          buslineRef = __value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.AddMarkupContent(76, "\r\n");
#nullable restore
#line 71 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
         foreach (var job in Jobs)
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(77, "            ");
            __builder.OpenComponent<HassyaAllrightCloud.Pages.Components.EditItem>(78);
            __builder.AddAttribute(79, "BusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ItemBus>>(
#nullable restore
#line 73 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                 BusLines

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(80, "ValueCheckHaitaBusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<HassyaAllrightCloud.Domain.Dto.DataInit>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<HassyaAllrightCloud.Domain.Dto.DataInit>(this, 
#nullable restore
#line 73 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                     ValueCheckHaitaBusLines

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(81, "UpYmdTimes", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ResponseHaiTaCheck>>(
#nullable restore
#line 73 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                           UpYmdTimeTmps

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(82, "Item", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ItemBus>(
#nullable restore
#line 73 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                job

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(83, "Width", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 73 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                             Width

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(84, "Param", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ConfigBusSchedule>(
#nullable restore
#line 73 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                            Param

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(85, "\r\n");
#nullable restore
#line 74 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(86, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(87, "\r\n");
#nullable restore
#line 77 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
}
else if (Container.Mode == (int)BusLineMode.Cut)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(88, "    ");
            __builder.OpenElement(89, "div");
            __builder.AddAttribute(90, "class", "listTimeline__item" + " " + (
#nullable restore
#line 80 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                    classLine

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 80 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                LineType == 1 ? "listTimeline__item--rentalBus" : null

#line default
#line hidden
#nullable disable
            ) + " " + (
#nullable restore
#line 80 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                          LineType == 2 ? "listTimeline__item--spareBus" : null

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(91, "style", "height:" + (
#nullable restore
#line 80 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                                                  height

#line default
#line hidden
#nullable disable
            ) + "rem;");
            __builder.AddMarkupContent(92, "\r\n");
#nullable restore
#line 81 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
         foreach (var job in Jobs)
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(93, "            ");
            __builder.OpenComponent<HassyaAllrightCloud.Pages.Components.EditItem>(94);
            __builder.AddAttribute(95, "BusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ItemBus>>(
#nullable restore
#line 83 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                 BusLines

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(96, "ValueCheckHaitaBusLines", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<HassyaAllrightCloud.Domain.Dto.DataInit>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<HassyaAllrightCloud.Domain.Dto.DataInit>(this, 
#nullable restore
#line 83 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                     ValueCheckHaitaBusLines

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(97, "UpYmdTimes", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<HassyaAllrightCloud.Domain.Dto.ResponseHaiTaCheck>>(
#nullable restore
#line 83 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                           UpYmdTimeTmps

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(98, "Item", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ItemBus>(
#nullable restore
#line 83 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                job

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(99, "Width", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 83 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                             Width

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(100, "Param", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<HassyaAllrightCloud.Domain.Dto.ConfigBusSchedule>(
#nullable restore
#line 83 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
                                                                                                                                                            Param

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(101, "\r\n");
#nullable restore
#line 84 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(102, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(103, "\r\n");
#nullable restore
#line 86 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 88 "E:\Project\HassyaAllrightCloud\Pages\Components\BusLine.razor"
       
    [Inject] protected IErrorHandlerService _errorModalService { get; set; }
    [Inject] public IBusScheduleService _busScheduleService { get; set; }
    [Parameter] public EventCallback<DataInit> ValueCheckHaitaBus { get; set; }
    private ElementReference buslineRef;
    [CascadingParameter] MouseContainer Container { get; set; }
    //[Parameter] public JobStatuses ListStatus { get; set; }
    //[Parameter] public JobStatuses[] AllowedStatuses { get; set; }
    [Parameter] public string LineId { get; set; }
    [Parameter] public int BusVehicle { get; set; }
    [Parameter] public string Busname { get; set; }
    [Parameter] public int SitenCdSeq { get; set; }
    [Parameter] public int LineStatus { get; set; }
    [Parameter] public int LineType { get; set; }
    [Parameter] public int NumberDate { get; set; }
    [Parameter] public double Width { get; set; }
    [Parameter] public DateTime Date { get; set; }
    [Parameter] public string startdate { get; set; }
    [Parameter] public string enddate { get; set; }
    [Parameter] public ConfigBusSchedule Param { get; set; }
    [Parameter] public VPM_RepairData CodeKbnItem { get; set; }
    [Parameter] public List<ResponseHaiTaCheck> UpYmdTimes { get; set; }
    private List<ResponseHaiTaCheck> UpYmdTimeInits { get; set; }
    private List<ResponseHaiTaCheck> UpYmdTimeAfters { get; set; }
    [Parameter] public List<ItemBus> BusLines { get; set; }
    public List<ResponseHaiTaCheck> UpYmdTimeTmps { get; set; }
    List<ItemBus> Jobs = new List<ItemBus>();
    List<ItemBusinLine> iteminLineLst = new List<ItemBusinLine>();
    BusLineData tmpbus = new BusLineData();
    double height;
    double heightline = 2; // 2rem = 32px
    public string classLine;
    double childWidth = 20;
    double time = 5;
    bool enableCreate = false;
    DateTime startdatedt;
    DateTime enddatedt;
    public string colorAllow { get; } = "#ffc0cb00";
    public string colorNotAllow { get; } = "#C6C6C6";
    string allow = "#ffc0cb00";
    string notallow = "#ffc0cb00";
    Double allowPercent = 50;
    string bg;
    string MenuId = "";

    private void MouseOver(MouseEventArgs e)
    {
        enableCreate = true;
    }

    private void MouseOut(MouseEventArgs e)
    {
        enableCreate = false;
    }
    [JSInvokable]
    public async Task ActualFocusCell(double left, double width)
    {
        ItemBus tmp = new ItemBus();
        tmp.Id = (Container.Jobs.Max(t => t.BookingId) + 1).ToString();
        if (Container.Mode == (int)BusLineMode.Create)
        {
            tmp.BookingId = "0";
        }
        else
        {
            tmp.BookingId = "-1";
        }
        tmp.BusLine = LineId;
        tmp.ColorLine = "color-10";
        tmp.Height = 30;
        tmp.Width = width;
        tmp.WidthDefault = width;
        tmp.LeftDefault = 0;
        tmp.Top = 10;
        tmp.Name = "仮予約";
        tmp.Left = left;
        tmp.KSKbn = 2;
        tmp.IsShow = true;
        tmp.StartDate = busScheduleHelper.convertwidthtodate(Width, left, Param.Number_of_days, Date).ToString("yyyyMMdd");
        tmp.TimeStart = int.Parse(busScheduleHelper.convertwidthtodate(Width, left, Param.Number_of_days, Date).ToString("HHmm"));
        tmp.EndDate = busScheduleHelper.convertwidthtodate(Width, left + width, Param.Number_of_days, Date).ToString("yyyyMMdd");
        tmp.TimeEnd = int.Parse(busScheduleHelper.convertwidthtodate(Width, left + width, Param.Number_of_days, Date).ToString("HHmm"));
        tmp.StartDateDefault = busScheduleHelper.convertwidthtodate(Width, left, Param.Number_of_days, Date).ToString("yyyyMMdd");
        tmp.TimeStartDefault = int.Parse(busScheduleHelper.convertwidthtodate(Width, left, Param.Number_of_days, Date).ToString("HHmm"));
        tmp.EndDateDefault = busScheduleHelper.convertwidthtodate(Width, left + width, Param.Number_of_days, Date).ToString("yyyyMMdd");
        tmp.TimeEndDefault = int.Parse(busScheduleHelper.convertwidthtodate(Width, left + width, Param.Number_of_days, Date).ToString("HHmm"));
        tmp.ShuriCdSeq = CodeKbnItem.RepairCdSeq;
        //tmp.AllowEdit = true;
        tmp.AllowDrop = true;
        tmp.MinDate = Date.ToString("yyyyMMdd");
        tmp.MinTime = 0;
        tmp.Maxdate = Date.AddDays(NumberDate).ToString("yyyyMMdd");
        tmp.MaxTime = 2359;
        Container.IsCreating = true;
        Container.PayloadCreate = tmp;
        await Container.CreatedJobAsync(tmp);
    }

    protected override void OnParametersSet()
    {
        Jobs.Clear();
        //Jobs.AddRange(Container.Jobs.Where(x => x.BusLine == LineId ));
        ReformatRenderItem();
        UpYmdTimeInits = UpYmdTimeTmps = UpYmdTimes;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (Jobs.Count == 1)
        {
            var job = Jobs.ToList();
        }
        if (firstRender)
        {
            await Container.UpdateHeightAsync(tmpbus); //TODO remove change of ticket 1101
        }
        if (Container.Mode == (int)BusLineMode.Create || Container.Mode == (int)BusLineMode.Repair)
        {
            iteminLineLst = new List<ItemBusinLine>();

        }

    }
    private async Task HandleMouseDown(MouseEventArgs e, string LineId, ElementReference lineref)
    {
        if (LineType != 1 && LineType != 2 && e.Buttons == 1)
        {
            foreach (var item in Jobs.Where(t => t.BusLine == LineId))
            {

                ItemBusinLine iteminline = new ItemBusinLine();
                iteminline.lineID = item.BusLine;
                iteminline.left = item.Left;
                iteminline.width = item.Left + item.Width;
                iteminline.minleft = item.minleftcreate;
                iteminline.maxwidth = item.maxwidthcreate;
                iteminLineLst.Add(iteminline);
            }
            if (Jobs.Where(t => t.BusLine == LineId).Count() == 0)
            {
                ItemBusinLine iteminline = new ItemBusinLine();
                iteminline.minleft = 0;
                iteminline.maxwidth = Width;
                iteminLineLst.Add(iteminline);
            }
            DateTime date = DateTime.Today;
            DateTime mindate = new DateTime();
            if (Container.Mode == (int)BusLineMode.Repair)
            {
                mindate = date.AddMinutes(60);
            }
            else
            {
                mindate = date.AddMinutes(15);
            }
            double minwidth = busScheduleHelper.calwidth(Width, date.ToString("yyyyMMdd"), date.ToString("HHmm"), mindate.ToString("yyyyMMdd"), mindate.ToString("HHmm"), Param.Number_of_days);
            await JSRuntime.InvokeVoidAsync("loadPageScript", "busSchedulePage", "creatediv", LineId, iteminLineLst, DotNetObjectReference.Create(this), minwidth, Param.ActiveV);
        }
    }
    private void ReformatRenderItem()
    {
        DateTime fromdate = Date;
        DateTime todate = Date.AddDays(NumberDate);
        DateTime.TryParseExact(startdate != null ? startdate.ToString() : "19700101", "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out startdatedt);
        DateTime.TryParseExact(enddate != null ? enddate.ToString() : "25003112", "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out enddatedt);
        if (startdatedt >= fromdate && startdatedt <= todate)
        {
            allow = colorNotAllow;
            notallow = colorAllow;
            int days = (startdatedt - fromdate).Days;
            allowPercent = ((double)days / (double)NumberDate) * 100;
        }
        else if (enddatedt >= fromdate && enddatedt <= todate)
        {
            allow = colorAllow;
            notallow = colorNotAllow;
            var end = enddatedt.AddDays(1);
            int days = (end - fromdate).Days;
            allowPercent = ((double)days / (double)NumberDate) * 100;
        }
        else if (startdatedt >= todate)
        {
            allow = colorAllow;
            notallow = colorNotAllow;
            allowPercent = 0;
        }
        else
        {
            allow = colorAllow;
            notallow = colorAllow;
            allowPercent = 100;
        }

        if (Container.View == 1)
        {
            heightline = 2; // 32px
        }
        if (Container.View == 2)
        {
            heightline = 1.0625; // 17px
        }
        if (Container.View == 3)
        {
            heightline = 0.875; // 14px
        }
        height = 0;
        List<ItemBus> tmp = new List<ItemBus>();

        if (Container.Type == 0)
        {
            tmp.AddRange(Container.Jobs.Where(x => x.BusLine == LineId && x.KSKbn == 2).OrderBy(o => o.StartDate).ThenBy(o => o.TimeStartString));
        }
        else if (Container.Type == 1)
        {
            tmp.AddRange(Container.Jobs.Where(x => (x.BusLine == LineId && x.KSKbn == 2) || (x.Tokisk_SitenCdSeq == SitenCdSeq && x.KSKbn == 1 && x.YouTblSeq > 0)).OrderBy(o => o.StartDate).ThenBy(o => o.TimeStartString));
        }
        else if (Container.Type == 2)
        {
            tmp.AddRange(Container.Jobs.Where(x => (x.BusLine == LineId && x.KSKbn == 2) || (x.BusName == Busname && x.KSKbn == 1 && x.YouTblSeq == 0)).OrderBy(o => o.StartDate).ThenBy(o => o.TimeStartString));
        }
        else if (Container.Type == 3)
        {
            tmp.AddRange(Container.Jobs.Where(x => (x.BusLine == LineId && x.KSKbn == 2) || (x.Tokisk_SitenCdSeq == SitenCdSeq && x.KSKbn == 1 && x.YouTblSeq > 0) || (x.BusName == Busname && x.KSKbn == 1 && x.YouTblSeq == 0)).OrderBy(o => o.StartDate).ThenBy(o => o.TimeStartString));
        }

        if (tmp.Count > 0)
        {
            List<List<ItemBus>> myList = new List<List<ItemBus>>();
            foreach (ItemBus bus in tmp)
            {
                var rowPosition = arrangePositionTmp(bus, myList);

                if (myList.Any())
                {
                    if (rowPosition >= myList.Count - 1)
                    {
                        myList.Add(new List<ItemBus>());
                    }
                    if (myList[rowPosition].Any())
                    {
                        myList[rowPosition].Add(bus);
                    }
                    else
                    {
                        myList[rowPosition].Add(bus);
                    }
                }
                else
                {
                    myList.Add(new List<ItemBus>());
                    myList[rowPosition].Add(bus);
                }
            }
            for (var i = 0; i < myList.Count; i++)
            {
                if (myList[i].Count() < 1)
                {
                    myList.RemoveAt(i);
                }
            }
            int d = Param.Number_of_days;

            for (var i = 0; i < myList.Count; i++)
            {
                for (var j = 0; j < myList[i].Count; j++)
                {
                    if (i == 0)
                    {
                        ItemBus tmpV = myList[i][j];
                        DateTime startdate;
                        DateTime enddate;
                        DateTime.TryParseExact(tmpV.MinDate + tmpV.MinTime.ToString("D4"), "yyyyMMddHHmm", CultureInfo.InvariantCulture, DateTimeStyles.None, out startdate);
                        DateTime.TryParseExact(tmpV.Maxdate + tmpV.MaxTime.ToString("D4"), "yyyyMMddHHmm", CultureInfo.InvariantCulture, DateTimeStyles.None, out enddate);
                        if (j == 0)
                        {
                            if (startdate < startdatedt)
                            {
                                tmpV.MinLeft = busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                            }
                            else
                            {
                                tmpV.MinLeft = busScheduleHelper.calleft(Width, tmpV.MinDate, tmpV.MinTime.ToString("D4"), d, Container.Date);
                            }
                            if (enddatedt < enddate)
                            {
                                tmpV.MaxWidth = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) - tmpV.Left;
                            }
                            else
                            {
                                tmpV.MaxWidth = busScheduleHelper.calleft(Width, tmpV.Maxdate, tmpV.MaxTime.ToString("D4"), d, Container.Date) - tmpV.Left;
                            }
                            if (myList[i].Count() > (j + 1))
                            {
                                double maxWidthtpm = myList[i][j + 1].Left - myList[i][j].Left;
                                if (maxWidthtpm < tmpV.MaxWidth)
                                {
                                    tmpV.MaxWidth = maxWidthtpm;
                                }
                            }
                            //if (tmpV.StartDate == tmpV.MinDate && tmpV.TimeStart == tmpV.MinTime && tmpV.EndDate == tmpV.Maxdate && tmpV.TimeEnd == tmpV.MaxTime)
                            //{
                            //    tmpV.AllowEdit = false;
                            //}
                        }
                        else
                        {
                            double minleft1 = 0;
                            if (startdate < startdatedt)
                            {
                                minleft1 = busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                            }
                            else
                            {
                                minleft1 = busScheduleHelper.calleft(Width, tmpV.MinDate, tmpV.MinTime.ToString("D4"), d, Container.Date);
                            }
                            if (enddatedt < enddate)
                            {
                                tmpV.MaxWidth = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) - tmpV.Left;
                            }
                            else
                            {
                                tmpV.MaxWidth = busScheduleHelper.calleft(Width, tmpV.Maxdate, tmpV.MaxTime.ToString("D4"), d, Container.Date) - tmpV.Left;
                            }
                            double minleft2 = myList[i][j - 1].Left + myList[i][j - 1].Width;
                            tmpV.MinLeft = minleft1;
                            if (minleft2 > minleft1)
                            {
                                tmpV.MinLeft = minleft2;
                            }
                        }
                        if (myList[i].Count() > j && j > 0)
                        {
                            if ((myList[i].Count() - 1) == j)
                            {
                                if (enddatedt < enddate)
                                {
                                    tmpV.MaxWidth = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) - tmpV.Left;
                                }
                                else
                                {
                                    tmpV.MaxWidth = busScheduleHelper.calleft(Width, tmpV.Maxdate, tmpV.MaxTime.ToString("D4"), d, Container.Date) - tmpV.Left;
                                }

                            }
                            else
                            {
                                double maxwidth = 0;
                                if (enddatedt < enddate)
                                {
                                    maxwidth = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) - tmpV.Left;
                                }
                                else
                                {
                                    maxwidth = busScheduleHelper.calleft(Width, tmpV.Maxdate, tmpV.MaxTime.ToString("D4"), d, Container.Date) - tmpV.Left;
                                }
                                double maxwidth1 = myList[i][j + 1].Left - myList[i][j].Left;
                                tmpV.MaxWidth = maxwidth;
                                if (maxwidth1 < maxwidth)
                                {
                                    tmpV.MaxWidth = maxwidth1;
                                }
                            }
                        }

                        tmpV.Top = 0.3125; //5px
                        tmpV.BusVehicle = BusVehicle;
                        tmpV.Height = heightline;
                        tmpV.CCSStyle = StyleItemText(tmpV);
                        tmpV.CCSStyleDefault = StyleItemTextDefault(tmpV);
                        tmpV.minleftcreate = busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) < 0 ? 0 : busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                        tmpV.maxwidthcreate = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) > Width ? Width : busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                        Jobs.Add(tmpV);
                        continue;
                    }
                    else
                    {
                        ItemBus tmpV = myList[i][j];
                        DateTime startdate;
                        DateTime enddate;
                        DateTime.TryParseExact(tmpV.MinDate + tmpV.MinTime.ToString("D4"), "yyyyMMddHHmm", CultureInfo.InvariantCulture, DateTimeStyles.None, out startdate);
                        DateTime.TryParseExact(tmpV.Maxdate + tmpV.MaxTime.ToString("D4"), "yyyyMMddHHmm", CultureInfo.InvariantCulture, DateTimeStyles.None, out enddate);
                        if (j == 0)
                        {
                            if (startdate < startdatedt)
                            {
                                tmpV.MinLeft = busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                            }
                            else
                            {
                                tmpV.MinLeft = busScheduleHelper.calleft(Width, tmpV.MinDate, tmpV.MinTime.ToString("D4"), d, Container.Date);
                            }
                            if (enddatedt < enddate)
                            {
                                tmpV.MaxWidth = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) - tmpV.Left;
                            }
                            else
                            {
                                tmpV.MaxWidth = busScheduleHelper.calleft(Width, tmpV.Maxdate, tmpV.MaxTime.ToString("D4"), d, Container.Date) - tmpV.Left;
                            }


                            if (myList[i].Count() > (j + 1))
                            {
                                double maxwidth = 0;
                                if (enddatedt < enddate)
                                {
                                    maxwidth = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                                }
                                else
                                {
                                    maxwidth = busScheduleHelper.calleft(Width, tmpV.Maxdate, tmpV.MaxTime.ToString("D4"), d, Container.Date);
                                }

                                double maxwidth1 = myList[i][j + 1].Left - myList[i][j].Left;
                                tmpV.MaxWidth = maxwidth;
                                if (maxwidth1 < maxwidth)
                                {
                                    tmpV.MaxWidth = maxwidth1;
                                }
                            }
                        }
                        else
                        {
                            double minleft1 = 0;
                            if (startdate < startdatedt)
                            {
                                minleft1 = busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                            }
                            else
                            {
                                minleft1 = busScheduleHelper.calleft(Width, tmpV.MinDate, tmpV.MinTime.ToString("D4"), d, Container.Date);
                            }
                            double minleft2 = myList[i][j - 1].TimeEnd;
                            tmpV.MinLeft = minleft1;
                            if (minleft2 > minleft1)
                            {
                                tmpV.MinLeft = minleft2;
                            }
                            tmpV.MinLeft =
                            tmpV.MaxWidth = -1;
                        }
                        if (myList[i].Count() > j && j > 0)
                        {
                            if ((myList[i].Count() - 1) == j)
                            {
                                tmpV.MaxWidth = -1;
                            }
                            else
                            {
                                double maxWidthtpm = myList[i][j + 1].Left - myList[i][j].Left;
                                if (maxWidthtpm < tmpV.MaxWidth)
                                {
                                    tmpV.MaxWidth = maxWidthtpm;
                                }
                            }

                        }
                        tmpV.Top = heightline * i + 0.3125 + (i) * 0.3125 + (i) * 0.0625;
                        tmpV.Height = heightline;
                        tmpV.BusVehicle = BusVehicle;
                        tmpV.CCSStyle = StyleItemText(tmpV);
                        tmpV.CCSStyleDefault = StyleItemTextDefault(tmpV);
                        //tmpV.AllowEdit = true;
                        tmpV.minleftcreate = busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) < 0 ? 0 : busScheduleHelper.calleft(Width, startdatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                        tmpV.maxwidthcreate = busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date) > Width ? Width : busScheduleHelper.calleft(Width, enddatedt.ToString("yyyyMMdd"), "0000", d, Container.Date);
                        Jobs.Add(tmpV);
                        continue;
                    }
                }
            }
            if (myList.Count() == 1)
            {
                height = heightline + 0.625;
            }
            else
            {
                height = heightline * myList.Count() + myList.Count() * 2 * 0.3125 + ((myList.Count() - 1) * 0.0625);
                tmpbus = new BusLineData();
                tmpbus.LineID = LineId;
                tmpbus.LineHeight = height;
            }
            for (var i = 0; i < Container.BusLists.Count; i++)
            {
                if (Container.BusLists[i].BusID == LineId)
                {
                    Container.BusLists[i].BusHeight = height;
                }
            }
            for (var i = 0; i < Container.BusGreenLists.Count; i++)
            {
                if (Container.BusGreenLists[i].BusName == Busname)
                {
                    Container.BusGreenLists[i].BusHeight = height;
                }
            }
            for (var i = 0; i < Container.BusGrayLists.Count; i++)
            {
                if (Container.BusGrayLists[i].BusName == Busname)
                {
                    Container.BusGrayLists[i].BusHeight = height;
                }
            }
        }
    }

    private double getHeightLine(int i, double heightline)
    {
        double v1 = heightline;
        if (i > 0)
        {
            v1 = heightline + i * 0.3125;
        }
        return v1;
    }
    private int arrangePositionTmp(ItemBus tmp, List<List<ItemBus>> itemList)
    {
        if (itemList.Count <= 0)
        {
            return 0;
        }
        for (var i = 0; i < itemList.Count; i++)
        {
            if (itemList[i].Count == 0)
            {
                return i;
            }
            //if (itemList[i][itemList[i].Count - 1].EndLine <= tmp.StartLine)
            if (itemList[i][itemList[i].Count - 1].TimeEndString <= tmp.TimeStartString)
            {
                return i;
            }
        }
        return itemList.Count;
    }
    private string StyleItemText(ItemBus item)
    {
        return "width:" + item.Width.ToString() + "px;top:" + item.Top.ToString() + "rem;left:" + item.Left.ToString() + "px;";
    }

    private string StyleItemTextDefault(ItemBus item)
    {
        return "width:" + item.WidthDefault.ToString() + "px;left:" + item.LeftDefault.ToString() + "px;";
    }
    private async Task HandleDrop()
    {
        if(Container.Payload != null)
        {
            var isValid = await HaiTaCheck();
            var upYmdTimeInits = UpYmdTimeInits;
            var ukeNo = Container.Payload.BookingId.Substring(5, 10);

            var dataInit = new DataInit();

            if (isValid)
            {
                if (Container.Payload == null || Container.Payload.Status == 0 || Container.Payload.AllowDrop == false || Container.Payload.BusLine == LineId) return;
                System.Diagnostics.Debug.WriteLine(LineId.ToString());
                //if (AllowedStatuses != null && !AllowedStatuses.Contains(Container.Payload.Status)) return;
                await Container.UpdateJobAsync(LineId, BusVehicle);

                dataInit.IsValid = isValid;
                dataInit.ResponseHaiTaCheckInit = await GetUpdYmds();
            }
            else
            {
                dataInit.IsValid = false;
                dataInit.ResponseHaiTaCheckInit = upYmdTimeInits;
            }

            dataInit.ActionBusSchedule = ActionBusSchedule.Move;
            dataInit.UkeNo = ukeNo;
            await ValueCheckHaitaBus.InvokeAsync(dataInit);
        }
    }
    protected override void OnInitialized()
    {
        // 1day-15minute
        if (Container.GridView == (int)TimeMode.Minute)
        {
            childWidth = 20;
            time = 5;
        }
        // 1day-1hour, 1day-3hours, 1day-6hour, 3days-1hour, 1week-1hour, 1month-1hour
        if (Container.GridData == (int)DayMode.OneDay && Container.GridView == (int)TimeMode.OneHour ||
            Container.GridData == (int)DayMode.OneDay && Container.GridView == (int)TimeMode.ThreeHours ||
            Container.GridData == (int)DayMode.OneDay && Container.GridView == (int)TimeMode.SixHours ||
            Container.GridData == (int)DayMode.ThreeDays && Container.GridView == (int)TimeMode.OneHour ||
            Container.GridData == (int)DayMode.Week && Container.GridView == (int)TimeMode.OneHour ||
            Container.GridData == (int)DayMode.Month && Container.GridView == (int)TimeMode.OneHour)
        {
            childWidth = Container.Width / (Param.Number_of_days * 96);
            time = 15;
        }
        // 3days-3hours, 3days-6hours, 1week-3hours, 1week-6hours
        if (Container.GridData == (int)DayMode.ThreeDays && Container.GridView == (int)TimeMode.ThreeHours ||
            Container.GridData == (int)DayMode.ThreeDays && Container.GridView == (int)TimeMode.SixHours ||
            Container.GridData == (int)DayMode.Week && Container.GridView == (int)TimeMode.ThreeHours ||
            Container.GridData == (int)DayMode.Week && Container.GridView == (int)TimeMode.SixHours)
        {
            childWidth = Container.Width / (Param.Number_of_days * 48);
            time = 30;
        }
        // 1week-1day, 1month-3hours, 1month-1day, 1month-6hours -->
        if (Container.GridData == (int)DayMode.Week && Container.GridView == (int)TimeMode.Day ||
            Container.GridData == (int)DayMode.Month && Container.GridView == (int)TimeMode.ThreeHours ||
            Container.GridData == (int)DayMode.Month && Container.GridView == (int)TimeMode.SixHours ||
            Container.GridData == (int)DayMode.Month && Container.GridView == (int)TimeMode.Day)
        {
            childWidth = Container.Width / (Param.Number_of_days * 24);
            time = 60;
        }
    }

    private async Task<bool> HaiTaCheck()
    {
        try
        {
            UpYmdTimeAfters = await GetUpdYmds();

            var upYmdTimeInitSelectd = UpYmdTimeInits.FirstOrDefault(_ => _.UkeNo == Container.Payload.BookingId && _.UnkRen == Container.Payload.haUnkRen
                                && _.TeiDanNo == Container.Payload.TeiDanNo && _.BunkRen == Container.Payload.BunkRen);

            var upYmdTimeAfterSelectd = UpYmdTimeAfters.FirstOrDefault(_ => _.UkeNo == Container.Payload.BookingId && _.UnkRen == Container.Payload.haUnkRen
                                        && _.TeiDanNo == Container.Payload.TeiDanNo && _.BunkRen == Container.Payload.BunkRen);

            var upYmdTimeInitJson = JsonConvert.SerializeObject(upYmdTimeInitSelectd?.UpYmdTimes);
            var upYmdTimeAfterJson = JsonConvert.SerializeObject(upYmdTimeAfterSelectd?.UpYmdTimes);

            return upYmdTimeInitJson == upYmdTimeAfterJson ? true : false;
        }
        catch (Exception ex)
        {
            _errorModalService.HandleError(ex);
        }
        return true;
    }

    public async Task ValueCheckHaitaBusLines(DataInit item)
    {
        await ValueCheckHaitaBus.InvokeAsync(item);
    }

    protected async Task<List<ResponseHaiTaCheck>> GetUpdYmds()
    {
        if (BusLines.Any())
        {
            var dataParam = BusLines?.Select(_ => new ParamHaiTaCheck
            {
                UkeNo = _.BookingId,
                UnkRen = _.haUnkRen,
                TeiDanNo = _.TeiDanNo,
                BunkRen = _.BunkRen,
                SyaSyuRen = _.SyaSyuRen
            }).ToList();
            if (dataParam.Any())
                return await _busScheduleService.GetUpYmdTimes(dataParam);
        }
        return new List<ResponseHaiTaCheck>();
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private BusScheduleHelper busScheduleHelper { get; set; }
    }
}
#pragma warning restore 1591
