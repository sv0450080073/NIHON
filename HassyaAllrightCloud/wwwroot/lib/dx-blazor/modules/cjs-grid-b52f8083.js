_dxBlazorInternal.define("cjs-grid-b52f8083.js",function(e,t,o){var l=e("./cjs-chunk-c43b3f7c.js"),n=e("./cjs-dom-utils-6a09eac3.js"),r=e("./cjs-chunk-509db829.js"),i=e("./cjs-chunk-9109506d.js");e("./cjs-chunk-7aa0d757.js");var a=e("./cjs-chunk-e26655d2.js"),c={GridSelectedRowCell:".dxbs-table td.table-active",ListBoxSelectedItem:".dropdown-item.active"};function s(e){return"[data-dxdg-draggable-id="+e+"]"}function u(e,t,o){var l,n,r;l=e,n=p(t,"clientX")-o.left,r=p(t,"clientY")-o.top,void(l.style.transform=["translate(",Math.round(n),"px, ",Math.round(r),"px)"].join(""))}var d={GroupPanelHead:"gph",ColumnHead:"ch"};function p(e,t){return void 0!==e[t]?e[t]:void 0!==e.touches?e.touches[0][t]:0}function h(e,t,o){var r=p(e,"clientX"),a=p(e,"clientY"),c=e.target,h=!1,v=function(e){var l=Math.abs(r-p(e,"clientX"))>10,v=Math.abs(a-p(e,"clientY"))>10;return(l||v)&&(h=!0,T(),function(e,t,o,l){var r=s(o),a=n.findParentBySelector(t,r);if(!a)return;var c=a.dataset.dxdgDraggable.split("|"),h=parseInt(c[0]),v=parseInt(c[1]),T=c[3],H="True"===c[4],S=n.getDocumentScrollLeft(),y=n.getDocumentScrollTop(),E={left:0,top:0},I={columnVisibleIndex:h,groupVisibleIndex:v,columnHeadType:T,canBeGrouped:H},b=function(e,t){for(var o=[],l=s(t),n=document.querySelectorAll(l),r=!1,i=!1,a=0;a<n.length;a++){var c=n[a],u=c.getBoundingClientRect(),p=c.dataset.dxdgDraggable.split("|"),h=parseInt(p[0]),m=parseInt(p[1]),g="True"===p[2],v=p[3];v==d.GroupPanelHead?r=!0:v==d.ColumnHead&&(i=!0),g&&o.push(new f(c,u.left,u.top,u.bottom,h,m,v,!0,!1)),o.push(new f(c,u.right,u.top,u.bottom,h,m,v,!1,!1))}if(r||i){if(!r){var T=document.querySelector("[data-dxdg-drag-group-panel="+t+"]");if(T){var u=T.getBoundingClientRect();o.push(new f(T,u.left,u.top,u.bottom,-1,0,d.GroupPanelHead,!1,!0,!0))}}if(!i){var H=document.querySelector("[data-dxdg-drag-head-row="+t+"]");if(H){var u=H.getBoundingClientRect();o.push(new f(H,u.right,u.top,u.bottom,0,-1,d.ColumnHead,!1,!0,!0))}}}return o}(0,o),x=function(e,t){var o=e.cloneNode(!0),l=e.getBoundingClientRect(),n={left:p(t,"clientX")-l.left,top:p(t,"clientY")-l.top};if("DIV"!=o.tagName){var r=document.createElement("DIV"),i=window.getComputedStyle(e);r.innerHTML=o.innerHTML,r.className="card "+e.className,r.style.width=e.offsetWidth+"px",r.style.height=e.offsetHeight+"px",r.style.paddingTop=i.paddingTop,r.style.paddingBottom=i.paddingBottom,r.style.paddingLeft=i.paddingLeft,r.style.paddingRight=i.paddingRight,o=r}else o.style.width=e.offsetWidth+"px",o.style.height=e.offsetHeight+"px";o.className=o.className+" dx-dragging-state",document.body.appendChild(o);var a=o.getBoundingClientRect();return{dragElement:o,offsetFromMouse:{left:a.left+n.left,top:a.top+n.top}}}(a,e),w=x.dragElement,R=x.offsetFromMouse;u(w,e,R);var D=!0,N=null,V=function(e){D&&(w.style.visibility="visible",D=!1);var t={left:R.left+E.left,top:R.top+E.top};return u(w,e,t),N=function(e,t,o,l,r){!function(e){for(var t=s(e),o=document.querySelectorAll("div."+g+t),l=0;l<o.length;l++){var n=o[l];n.parentNode.removeChild(n)}}(t);for(var i=null,a=[],c=p(l,"clientX"),u=p(l,"clientY"),h=0;h<e.length;h++){var f=e[h];if(!m(o,f)&&(f.columnHeadType!=d.GroupPanelHead||o.canBeGrouped)){var v=f.top+r.top<=u&&u<=f.bottom+r.top;if(v){if(f.wholeRowIsRarget){i=f;break}a.push({distance:Math.abs(Math.abs(f.x+r.left)-Math.abs(c)),target:f})}}}if(null==i){var T=1e6;for(var h in a)T>a[h].distance&&(T=a[h].distance,i=a[h].target)}null!=i&&!function(e,t){var o=document.createElement("DIV");o.className=g,o.dataset.dxdgDraggableId=t,o.style.top=e.top+(e.docScrollTop-n.getDocumentScrollTop())+n.getDocumentScrollTop()-1-1+"px",o.style.height=e.bottom-e.top+2+"px",o.style.left=e.x+(e.docScrollLeft-n.getDocumentScrollLeft())+n.getDocumentScrollLeft()+"px",o.innerHTML=["<span class='oi oi-arrow-bottom' aria-hidden='true'></span>","<div style='height:",o.style.height,"'></div>","<span class='oi oi-arrow-top' aria-hidden='true'></span>"].join(""),document.body.appendChild(o),e.mark=o}(i,t);return i}(b,o,I,e,E),e.preventDefault(),!1},q=function(){if(N){var e=I.columnHeadType==d.GroupPanelHead?I.groupVisibleIndex:I.columnVisibleIndex,t=N.columnHeadType==d.GroupPanelHead?N.groupVisibleIndex:N.columnVisibleIndex;l.invokeMethodAsync("OnGridColumnHeadDragNDrop",e,I.columnHeadType,t,N.columnHeadType,N.insertBefore),N.mark.parentNode.removeChild(N.mark)}n.DetachEventFromElement(document,i.TouchUIHelper.touchMouseMoveEventName,V),n.DetachEventFromElement(document,i.TouchUIHelper.touchMouseUpEventName,q),n.DetachEventFromElement(window,"scroll",B),w.parentNode.removeChild(w)},B=function(){E={left:S-n.getDocumentScrollLeft(),top:y-n.getDocumentScrollTop()}};n.AttachEventToElement(document,i.TouchUIHelper.touchMouseMoveEventName,V),n.AttachEventToElement(document,i.TouchUIHelper.touchMouseUpEventName,q),n.AttachEventToElement(window,"scroll",B)}(e,c,t,o)),e.preventDefault(),!1},T=function(){n.DetachEventFromElement(document,i.TouchUIHelper.touchMouseMoveEventName,v),n.DetachEventFromElement(document,i.TouchUIHelper.touchMouseUpEventName,T),!h&&c&&l.Browser.WebKitTouchUI&&c.click()};return n.AttachEventToElement(document,i.TouchUIHelper.touchMouseMoveEventName,v),n.AttachEventToElement(document,i.TouchUIHelper.touchMouseUpEventName,T),e.preventDefault(),!1}function f(e,t,o,l,r,i,a,c,s){this.element=e,this.x=t,this.top=o,this.bottom=l,this.columnVisibleIndex=r,this.groupVisibleIndex=i,this.columnHeadType=a,this.insertBefore=c,this.wholeRowIsRarget=s,this.docScrollTop=n.getDocumentScrollTop(),this.docScrollLeft=n.getDocumentScrollLeft()}function m(e,t){function o(e,t){return t.groupVisibleIndex==e.groupVisibleIndex||t.groupVisibleIndex==e.groupVisibleIndex-1&&!t.insertBefore}function l(e,t){return t.columnVisibleIndex==e.columnVisibleIndex||t.columnVisibleIndex==e.columnVisibleIndex-1&&!t.insertBefore}return!(t.columnHeadType!=e.columnHeadType||e.columnHeadType!=d.GroupPanelHead||!o(e,t))||(!(t.columnHeadType!=e.columnHeadType||e.columnHeadType!=d.ColumnHead||!l(e,t))||(!(e.columnHeadType!=d.GroupPanelHead||t.columnHeadType!=d.ColumnHead||-1==e.columnVisibleIndex||!l(e,t))||!(e.columnHeadType!=d.ColumnHead||t.columnHeadType!=d.GroupPanelHead||-1==e.groupVisibleIndex||!o(e,t))))}var g="dxgv-target-marks";var v=200;function T(e){if(n.elementIsInDOM(e)){if(!(t=function(e){var t=e.querySelector("*[id$='_LB']");t||(t=e.parentNode.querySelector("*[id$='_LB']"));t||(t=e);if(t){var o=t.querySelector(c.ListBoxSelectedItem);if(o)return o.parentNode}return null}(e)))var t=function(e){var t=null;n.QuerySelectorFromRoot(e,function(o){t=e.querySelector("*"+o+" > *[id$='_LB']")}),t||n.QuerySelectorFromRoot(e.parentNode,function(o){t=e.parentNode.querySelector("*"+o+" > *[id$='_LB']")});var o=t?t.querySelector(c.GridSelectedRowCell):null;return o?o.parentNode:null}(e);if(t){var o=e,l=o.scrollTop+o.clientHeight<t.offsetTop+t.offsetHeight;o.scrollTop>t.offsetTop&&(o.scrollTop=t.offsetTop),l&&(o.scrollTop=t.offsetTop-(o.clientHeight-t.offsetHeight))}}}function H(e,t,o,l,n,r){var i=e.target;S(e,t,o,i,l),i.dataset.InScrollRequest||(y(i),i.dataset.OnScrollTimerId=window.setTimeout(function(){!function(e,t,o,l,n,r,i){y(l);var a=!0;l.dataset.prevScrollTop?a=l.dataset.prevScrollTop!=l.scrollTop.toString():l.dataset.prevScrollTop=l.scrollTop;a&&o.isVirtualScrolling&&!function(e,t,o,l,n){var r=E(t),i=x(t,n),a=i.itemHeight,c=i.scrollTop,s=i.scrollBottom,u=i.scrollTopForRequest,d=i.scrollHeightForRequest,p=l.clientHeight>0&&s>o.offsetHeight+r.offsetHeight;(o.clientHeight>0&&c<o.offsetHeight||p)&&(t.dataset.InScrollRequest=!0,function(e,t,o,l){if(e.dxScrollCache){if(e.dxScrollCache.itemHeight===t&&e.dxScrollCache.scrollTopForRequest===o&&e.dxScrollCache.scrollHeightForRequest===l)return}else e.dxScrollCache={itemHeight:t,scrollTopForRequest:o,scrollHeightForRequest:l};e.invokeMethodAsync("OnGridVirtualScroll",t,o,l)}(e,a,u,d))}(t,l,r,i,!1);S(e,t,o,l,n)}(e,t,o,i,l,n,r)},v),window.setTimeout(function(){S(e,t,o,i,l)},0))}function S(e,t,o,l,n,r,i){o.isHorizontalScrolling&&(n.scrollLeft=l.scrollLeft)}function y(e){e.dataset.OnScrollTimerId&&(clearTimeout(e.dataset.OnScrollTimerId),delete e.dataset.OnScrollTimerId)}function E(e){var t=e.querySelector("table.dxbs-table"),o=e.parentNode.querySelector("div.dxbs-listbox > ul");return t||o}function I(e,t,o,l,n){var r=E(t),i=function(e,t){var o=b(e);return{itemHeight:o,spacerTop:t.VirtualScrollingOptions.ItemsAbove*o,spacerBelow:t.VirtualScrollingOptions.ItemsBelow*o}}(r,n);o.style.height=i.spacerTop+"px",l.style.height=i.spacerBelow+"px",function(e,t,o,l){if(e.clientHeight>t.offsetHeight)return;e.scrollTop<o.clientHeight&&(e.scrollTop=o.clientHeight+1);e.scrollTop+e.clientHeight>o.clientHeight+t.offsetHeight&&(e.scrollTop=o.clientHeight+t.offsetHeight-e.clientHeight-1)}(t,r,o)}function b(e){for(var t=function(e){var t=[];return e.dataset.tempUniqueId="tempUniqueId","TABLE"===e.tagName?t=e.parentNode.querySelectorAll("TABLE[data-temp-unique-id] > TBODY > TR"):"UL"===e.tagName&&(t=e.parentNode.querySelectorAll("ul[data-temp-unique-id] > li")),delete e.dataset.tempUniqueId,t}(e),o={},l=0;l<t.length;l++){var n=t[l];o[n.offsetHeight]=o[n.offsetHeight]?o[n.offsetHeight]+1:1}var r=0,i=0;for(var a in o)o[a]>i&&(i=o[a],r=a);return Number.parseInt(r)}function x(e,t){var o=300,l=300;t&&(o=0,l=0);var n=E(e),r=e.scrollTop-o;r<0&&(r=0);var i=e.scrollTop+e.clientHeight+l,a=r-o;a<0&&(a=0);var c=i-a+l;return{itemHeight:b(n),scrollTop:r,scrollBottom:i,scrollTopForRequest:a,scrollHeightForRequest:c}}function w(e,t){return(t.isVerticalScrolling||t.isVirtualScrolling)&&(e.clientHeight<e.scrollHeight||"scroll"==e.style.overflowY)}function R(e,t,o,l,c,u,d,p){if(null!==e){u=JSON.parse(u),e=n.EnsureElement(e),r.DisposeEvents(e);var f=null,m=null,g=null,v=null;(t=n.EnsureElement(t))&&(o=n.EnsureElement(o),t.dataset.InScrollRequest=!0,u.isVirtualScrolling&&(l=n.EnsureElement(l),c=n.EnsureElement(c)),(u.isVirtualScrolling||u.isVerticalScrolling)&&function(e,t,o){if((o.isVerticalScrolling||o.isVirtualScrolling)&&t){var l=[t];if(w(e,o)){var n=a.GetVerticalScrollBarWidth();if(17!==n||o.isHorizontalScrolling)for(var r=o.isHorizontalScrolling?"paddingRight":"marginRight",i=o.isHorizontalScrolling?"marginRight":"paddingRight",c=0,s=l.length;c<s;c++)l[c].style[r]="0",l[c].style[i]=n+"px";else e.style.paddingRight="",e.style.marginRight="",t.style.paddingRight="",t.style.marginRight=""}else e.style.paddingRight="0",e.style.marginRight="0",t.style.paddingRight="0",t.style.marginRight="0"}}(t,o,u),u.isVirtualScrolling&&(I(0,t,l,c,u),p&&T(t)),function(e){for(var t=e.querySelectorAll("th.dxbs-header-indent>button.invisible"),o=0,l=0;l<t.length;l++){var r=(i=t[l]).offsetWidth+n.GetLeftRightBordersAndPaddingsSummaryValue(i.parentNode);o<r&&(o=r)}for(l=0;l<t.length;l++){var i;(i=t[l]).parentNode.style.width=o+"px"}}(e),delete t.dataset.InScrollRequest,n.AttachEventToElement(t,"scroll",f=function(e){return H(e,d,u,o,l,c)}),function(e){return e.isHorizontalScrolling||e.isVerticalScrolling}(u)&&((m=function(){!function(e,t,o,l,n,r){if(t){t.dataset.InScrollRequest=!0;var i=t.style.overflowX;t.style.overflowX="hidden",t.style.width="0"}if(o){var c=o.style.overflowX;o.style.overflowX="hidden",o.style.width="0"}var s=e.clientWidth;if(t&&(s&&(t.style.width=s+"px"),t.style.overflowX=i),o){var u=w(t,r)?a.GetVerticalScrollBarWidth():0;s&&(o.style.width=s-u+"px"),o.style.overflowX=c}t&&delete t.dataset.InScrollRequest}(e,t,o,0,0,u)})(),n.AttachEventToElement(window,"resize",m)));var S=null,E=null;if(u.isColumnDragEnabled){var b=e.dataset.dxdgId;if(b){var x=e.querySelector("th"+s(b));(S=x?x.parentNode:null)&&n.AttachEventToElement(S,i.TouchUIHelper.touchMouseDownEventName,g=function(e){return h(e,b,d)});var R=e.querySelector("div"+s(b));(E=R?R.parentNode:null)&&n.AttachEventToElement(E,i.TouchUIHelper.touchMouseDownEventName,v=function(e){return h(e,b,d)})}}return r.RegisterDisposableEvents(e,function(){f&&n.DetachEventFromElement(t,"scroll",f),m&&n.DetachEventFromElement(window,"resize",m),t&&y(t),g&&S&&n.DetachEventFromElement(S,i.TouchUIHelper.touchMouseDownEventName,g),v&&E&&n.DetachEventFromElement(E,i.TouchUIHelper.touchMouseDownEventName,v)}),Promise.resolve("ok")}}function D(e){return(e=n.EnsureElement(e))&&r.DisposeEvents(e),Promise.resolve("ok")}var N={Init:R,Dispose:D};o.Dispose=D,o.GetParametersForVirtualScrollingRequest=x,o.HasParametersForVirtualScrollingRequest=function(e){return null!==E(e)},o.Init=R,o.ScrollToSelectedItem=T,o.default=N},["cjs-chunk-c43b3f7c.js","cjs-dom-utils-6a09eac3.js","cjs-chunk-509db829.js","cjs-chunk-9109506d.js","cjs-chunk-7aa0d757.js","cjs-chunk-e26655d2.js"]);
